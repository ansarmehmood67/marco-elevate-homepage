<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Critical Performance Resource Hints -->
    <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.youtube.com">
    
    <!-- Critical resource preloading with modern formats -->
    <link rel="preload" href="https://res.cloudinary.com/dsergeqc9/image/upload/f_avif,q_85,w_1920/v1758129785/homepage_hero_poster.jpg" as="image" type="image/avif">
    <link rel="preload" href="https://res.cloudinary.com/dsergeqc9/image/upload/f_webp,q_85,w_1920/v1758129785/homepage_hero_poster.jpg" as="image" type="image/webp">
    <link rel="preload" href="https://res.cloudinary.com/dsergeqc9/image/upload/q_85,w_1920/v1758129785/homepage_hero_poster.jpg" as="image" type="image/jpeg">
    
    <!-- Critical font preloading with display swap -->
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjp-Ek-_EeA.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Critical CSS for above-the-fold content -->
    <style>
    /* Critical path CSS for hero section */
    .hero-video-poster {
      background-image: url('https://res.cloudinary.com/dsergeqc9/image/upload/v1758129785/homepage_hero_poster.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    .optimize-lcp { 
      will-change: transform; 
      contain: layout style paint;
      transform: translate3d(0, 0, 0);
    }
    
    /* Aspect ratio utilities for layout stability */
    .aspect-video { aspect-ratio: 16 / 9; }
    .aspect-square { aspect-ratio: 1; }
    
    /* Critical loading spinner */
    .performance-spinner {
      width: 48px;
      height: 48px;
      border: 3px solid rgba(46, 139, 192, 0.2);
      border-top-color: #2E8BC0;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      /* Critical font display optimization */
      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url('https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjp-Ek-_EeA.woff2') format('woff2');
      }
    </style>
    
    <!-- Optimized third-party script loading -->
    <script>
      // Advanced deferred loading for third-party scripts
      (function() {
        let scriptsLoaded = false;
        
        const loadThirdPartyScripts = () => {
          if (scriptsLoaded) return;
          scriptsLoaded = true;
          
          // Load reCAPTCHA
          const recaptchaScript = document.createElement('script');
          recaptchaScript.src = 'https://www.google.com/recaptcha/api.js';
          recaptchaScript.async = true;
          recaptchaScript.defer = true;
          document.head.appendChild(recaptchaScript);
        };
        
        // Load on user interaction or after 3 seconds
        const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];
        const loadOnInteraction = () => {
          events.forEach(event => {
            document.removeEventListener(event, loadOnInteraction, { passive: true });
          });
          loadThirdPartyScripts();
        };
        
        events.forEach(event => {
          document.addEventListener(event, loadOnInteraction, { passive: true });
        });
        
        // Fallback timeout
        setTimeout(loadThirdPartyScripts, 3000);
      })();
    </script>

  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
